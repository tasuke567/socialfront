<div class="container mx-auto px-4 py-6">
  <h2 class="text-3xl font-bold mb-8 text-center text-gray-800">Posts</h2>

  <!-- ฟอร์มสร้างโพสต์ -->
<div class="mb-8 p-6 bg-white shadow-lg rounded-lg max-w-2xl mx-auto border border-gray-200">
  <!-- User Profile -->
  <div class="flex items-center mb-4">
    <span class="username">{{ currentUser.username }}</span>
  </div>

  <!-- Post Input -->
  <textarea
    [(ngModel)]="newPostContent"
    placeholder="What's on your mind?"
    rows="4"
    class="w-full border border-gray-300 rounded-lg p-4 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500"
  ></textarea>

  <button
    (click)="createPost()"
    [disabled]="!newPostContent.trim()"
    class="w-full bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 disabled:bg-gray-400 transition duration-300"
  >
    {{ isEditing ? "Update Post" : "Post" }}
  </button>
</div>


  <!-- การแสดงสถานะการโหลด -->
  <div *ngIf="isLoading" class="text-center text-gray-500 py-4">
    Loading posts...
  </div>

  <!-- ถ้าไม่มีโพสต์ -->
  <div
    *ngIf="!isLoading && posts.length === 0"
    class="text-center text-gray-500 py-4"
  >
    <p>No posts found.</p>
  </div>

  <!-- การแสดงโพสต์ทั้งหมด -->
  <div class="posts-container">
    <div *ngFor="let post of posts" class="post-item">
      <div class="post-header flex justify-between items-center">
        <small class="text-gray-500 text-sm">
          {{ post.username }} - {{ post.createdAt }}
        </small>

        <!-- ปุ่มที่คลิกเพื่อแสดง Edit / Delete -->
        <button
          (click)="toggleActions(post.id)"
          class="bg-gray-500 text-white px-2 py-2 rounded-l hover:bg-gray-600 transition duration-200"
        >
          <!-- ใช้ SVG Icon แสดงการเลือก -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5"
            viewBox="0 0 20 20"
            fill="currentColor"
            class="text-white"
          >
            <path
              fill-rule="evenodd"
              d="M4 5.25a.75.75 0 011.5 0v9.5a.75.75 0 01-1.5 0v-9.5zM8 5.25a.75.75 0 011.5 0v9.5a.75.75 0 01-1.5 0v-9.5zM12 5.25a.75.75 0 011.5 0v9.5a.75.75 0 01-1.5 0v-9.5z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
      </div>

      <div class="post-content m-5 mb-10">
        <p>{{ post.content }}</p>
      </div>

      <!-- แสดงปุ่ม Edit และ Delete เมื่อคลิก Show Options -->
      <div *ngIf="showActions === post.id" class="post-actions mt-2 flex space-x-2 py-10">
        <button
          (click)="editPost(post.id, post.content)"
          class="bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition duration-200"
        >
          Edit
        </button>
        <button
          (click)="deletePost(post.id)"
          class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition duration-200"
        >
          Delete
        </button>
      </div>
    </div>
  </div>
</div>
